<!DOCTYPE html><html><head><title> SYSU Collegiate Programming Contest 2020, Onsite &middot; wu-kan</title><!-- Begin Jekyll SEO tag v2.7.1 --><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="SYSU Collegiate Programming Contest 2020, Onsite" /><meta property="og:locale" content="en_US" /><meta name="description" content="中大校赛 2020" /><meta property="og:description" content="中大校赛 2020" /><link rel="canonical" href="http://localhost:4000/2020/11/29/SYSU-Collegiate-Programming-Contest-2020,-Onsite/" /><meta property="og:url" content="http://localhost:4000/2020/11/29/SYSU-Collegiate-Programming-Contest-2020,-Onsite/" /><meta property="og:site_name" content="wu-kan" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-11-29T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="SYSU Collegiate Programming Contest 2020, Onsite" /><meta name="google-site-verification" content="YIKi1rBnyUaS-DMYiluseI5kZzTwjCkTFmKkSkMZDJk" /><meta name="baidu-site-verification" content="szbTSfUGAB" /> <script type="application/ld+json"> {"@type":"BlogPosting","url":"http://localhost:4000/2020/11/29/SYSU-Collegiate-Programming-Contest-2020,-Onsite/","datePublished":"2020-11-29T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2020/11/29/SYSU-Collegiate-Programming-Contest-2020,-Onsite/"},"headline":"SYSU Collegiate Programming Contest 2020, Onsite","description":"中大校赛 2020","dateModified":"2020-11-29T00:00:00+08:00","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" /><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="alternate" href="/feed.xml" title="RSS" type="application/rss+xml" /><link rel="apple-touch-icon-precomposed" href="https://gravatar.loli.net/avatar/289efba375d63424de3c49569c446744?s=320" /><link rel="shortcut icon" href="https://gravatar.loli.net/avatar/289efba375d63424de3c49569c446744?s=32" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/gh/poole/lanyon@v1.1.0/public/css/poole.min.css,gh/poole/lanyon@v1.1.0/public/css/lanyon.min.css,gh/poole/lanyon@v1.1.0/public/css/syntax.min.css" /> <script async="async" src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/js/all.min.js" ></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Dreamer-Paul/Pio@2.4/static/pio.min.css" /><style> @media only print { .pio-container { display: none; } }</style><script async="async" src="https://cdn.jsdelivr.net/combine/gh/Dreamer-Paul/Pio@2.4/static/l2d.min.js,gh/Dreamer-Paul/Pio@2.4/static/pio.min.js" onload=' let pio_container = document.createElement("div"); pio_container.classList.add("pio-container"); pio_container.classList.add("right"); pio_container.style.bottom = "-2rem"; pio_container.style.zIndex = "1"; document.body.insertAdjacentElement("beforeend", pio_container); let pio_action = document.createElement("div"); pio_action.classList.add("pio-action"); pio_container.insertAdjacentElement("beforeend", pio_action); let pio_canvas = document.createElement("canvas"); pio_canvas.id = "pio"; pio_canvas.style.width = "14rem"; pio_canvas.width = "600"; pio_canvas.height = "800"; pio_container.insertAdjacentElement("beforeend", pio_canvas); let pio = new Paul_Pio({ "mode": "fixed", "hidden": true, "night": "for(let i=7; i<16; ++i) if(document.body.classList.contains(`theme-base-0`+i.toString(16))) { document.body.classList.remove(`theme-base-0`+i.toString(16)); document.body.classList.add(`theme-base-0`+((i-6)%9+7).toString(16)); break; }", "content": { "link": ["https:\/\/jekyll-theme-WuK.wu-kan.cn"], "skin": ["要换成我的朋友吗？", "让她放个假吧~"], "hidden": true, "custom": [{ "selector": "a", "type": "link", }, { "selector": ".sidebar-toggle", "text": "打开侧边栏叭~" }, { "selector": ".effect-info", "text": "哇，你发现了什么！" }, { "selector": "#sidebar-search-input", "text": "想搜索什么呢？很多干货哦！" }, { "selector": "#toc", "text": "这是目录~" }, { "selector": ".page-title", "text": "这是标题~" }, { "selector": ".v", "text": "评论没有审核，要对自己的发言负责哦~" }] }, "model": [ "https:\/\/cdn.jsdelivr.net/gh/imuncle/live2d/model/33/model.2018.bls-winter.json", "https:\/\/cdn.jsdelivr.net/gh/imuncle/live2d/model/platelet-2/model.json", "https:\/\/cdn.jsdelivr.net/gh/imuncle/live2d/model/xiaomai/xiaomai.model.json", "https:\/\/cdn.jsdelivr.net/gh/imuncle/live2d/model/mashiro/seifuku.model.json", "https:\/\/cdn.jsdelivr.net/gh/imuncle/live2d/model/Violet/14.json", "https:\/\/cdn.jsdelivr.net/gh/xiaoski/live2d_models_collection/Kobayaxi/Kobayaxi.model.json", "https:\/\/cdn.jsdelivr.net/gh/xiaoski/live2d_models_collection/mikoto/mikoto.model.json", "https:\/\/cdn.jsdelivr.net/gh/xiaoski/live2d_models_collection/uiharu/uiharu.model.json"] });' ></script> <script src='https://zz.bdstatic.com/linksubmit/push.js' async="async" ></script><style> .wrap { transition-property: width,background-size,transform; transition-duration: .3s; transition-timing-function: ease-in-out; min-height: 100%; display: inline-block; background-size: 100% auto; background-position: 0% 0%; background-repeat: no-repeat; background-attachment: fixed; background-image: url(https://Mizuno-Ai.wu-kan.cn/pixiv/74559485_p1.webp); } @media (min-aspect-ratio: 2400/1850) { .wrap { background-image: url(https://Mizuno-Ai.wu-kan.cn/pixiv/71932901_p0.webp); } } .sidebar-overlay #sidebar-checkbox:checked ~ .wrap { width: calc(100% - 14rem); background-size: calc(100% - 14rem) auto; transform: translateX(14rem); } .layout-reverse.sidebar-overlay #sidebar-checkbox:checked ~ .wrap { transform: translateX(0); }</style><style> .sidebar, html, h1, h2, h3, h4, h5, h6 { font-family: "Courier New", "Courier", "Hiragino Sans GB", "WenQuanYi Micro Hei", "Microsoft YaHei Light", "Microsoft JhengHei", monospace; }</style><style> td, th { padding: 0px; border: 0px; } table { border: 0px; } table tbody { display: block; overflow: scroll; } table thead, tbody tr { display: table; table-layout: fixed; width: 100%; }</style><style> img { display: inline-block; margin: 0; }</style><style> ::-webkit-scrollbar { width: 3px; height: 3px; } ::-webkit-scrollbar-thumb { background-image: linear-gradient(45deg, Cyan 0%, Magenta 50%, Yellow 100%); }</style><style> ::selection { color: White; background: Black; }</style><body class="theme-base-0d layout-reverse sidebar-overlay"> <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular styles, `#sidebar-checkbox` for behavior. --> <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox" /> <!-- Toggleable sidebar --><div class="sidebar" id="sidebar"><div class="sidebar-item"><div class="effect effect-right_to_left"> <img class="effect-img" src="https://gravatar.loli.net/avatar/289efba375d63424de3c49569c446744?s=320" alt="img" /><div class="effect-info"> SYSU超算17级在读<br/> 水野爱<br/> HPC<br/> 田宫例四驱车<br/> <a href="mailto:i@wu-kan.cn"> <i class="fas fa-envelope"></i> </a> <a href="https://github.com/wu-kan"> <i class="fab fa-github"></i> </a> <a href="https://codeforces.com/profile/WuK"> <i class="fas fa-chart-bar"></i> </a> <a href="https://vjudge.net/user/WuK"> <i class="fas fa-smile"></i> </a> <a href="https://www.zhihu.com/people/wu.kan/activities"> <i class="fab fa-zhihu"></i> </a> <iframe src="https://music.163.com/outchain/player?type=0&id=155059595&auto=0&height=32" width=100% height=52 frameborder="no" border="0" marginwidth="0" marginheight="0" ></iframe></div></div></div><nav class="sidebar-nav"> <a class="sidebar-nav-item" href="/"> <i class="fas fa-home fa-fw"></i> 首页 </a> <a class="sidebar-nav-item" href="/comments/"> <i class="fas fa-comments fa-fw"></i> 留言 </a> <a class="sidebar-nav-item" href="/tags/"> <i class="fas fa-tags fa-fw"></i> 标签 </a> <a class="sidebar-nav-item" href="/archive/"> <i class="fas fa-archive fa-fw"></i> 归档 </a> <a class="sidebar-nav-item" href="/merger/"> <i class="fas fa-coffee fa-fw"></i> 打赏 </a></nav><div class="sidebar-item"><style> #sidebar-search-input { background: none; border: none; color: White; width: 100%; } #sidebar-search-results-container { overflow: auto auto; max-height: 66.6vh; }</style><input id="sidebar-search-input" placeholder="搜索博文" /><ol id="sidebar-search-results-container" ></ol><script src='https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.9.1' async='async' onload=' SimpleJekyllSearch({ json: "/assets/simple-jekyll-search/search.json", searchInput: document.getElementById("sidebar-search-input"), resultsContainer: document.getElementById("sidebar-search-results-container"), searchResultTemplate: `<li><a href="{url}">{title}</a>`, limit: 999, fuzzy: true })' ></script><style> #toc { overflow: auto auto; max-height: 66.6vh; }</style><ol id="toc"><li><a href="#%E4%B8%AD%E5%A4%A7%E6%A0%A1%E8%B5%9B-2020">中大校赛 2020</a><ol><li><a href="#a-undercover">A Undercover</a><li><a href="#b-orienteering">B Orienteering</a><li><a href="#c-compare">C Compare</a><li><a href="#d-decode">D Decode</a><li><a href="#e-reading">E Reading</a><li><a href="#f-competition">F Competition</a><li><a href="#g-sum">G Sum</a><li><a href="#h-sequence">H Sequence</a><li><a href="#i-tianhe-iia">I TianHe-IIA</a><li><a href="#j-traffic-lights">J Traffic Lights</a><li><a href="#k-cards">K Cards</a><li><a href="#l-teams">L Teams</a></ol></ol><style> .sidebar-checkbox { display: none; } .sidebar-toggle { position: fixed; }</style><style> .sidebar { overflow: scroll; min-height: 101%; }</style><style> .effect { margin: 1rem; perspective: 900px; } .effect-info { text-align: center; position: absolute; top: 0; transform-style: preserve-3d; } .effect-img { z-index: 11; width: 100%; height: 100%; position: relative; transition: all 0.5s ease-in-out; } .effect-img:before { position: absolute; display: block; } .effect-right_to_left .effect-img { transform-origin: 0% 50%; } .effect-right_to_left:hover .effect-img { transform: rotate3d(0, 1, 0, -180deg); }</style><div> <i class="fas fa-cog fa-spin fa-fw"></i> <span id="run_time_day"> <i class="fas fa-spinner fa-pulse"></i> </span>天 <span id="run_time_hour"> <i class="fas fa-spinner fa-pulse"></i> </span>时 <span id="run_time_minute"> <i class="fas fa-spinner fa-pulse"></i> </span>分 <span id="run_time_second"> <i class="fas fa-spinner fa-pulse"></i> </span>秒 <script> setInterval(function (d,h,m,s,b) { function setzero(i) { return i < 10 ? "0" + i : i; } let BirthDay = new Date(b); let today = new Date(); let timeold = (today.getTime() - BirthDay.getTime()); let sectimeold = timeold / 1000; let secondsold = Math.floor(sectimeold); let msPerDay = 24 * 60 * 60 * 1000; let e_daysold = timeold / msPerDay; let daysold = Math.floor(e_daysold); let e_hrsold = (e_daysold - daysold) * 24; let hrsold = Math.floor(e_hrsold); let e_minsold = (e_hrsold - hrsold) * 60; let minsold = Math.floor((e_hrsold - hrsold) * 60); let seconds = Math.floor((e_minsold - minsold) * 60); d.textContent = daysold; h.textContent = setzero(hrsold); m.textContent = setzero(minsold); s.textContent = setzero(seconds); }, 1000, document.getElementById("run_time_day"), document.getElementById("run_time_hour"), document.getElementById("run_time_minute"), document.getElementById("run_time_second"), "10/04/2017 11:03:56")// 这是我第一篇CSDN博客的时间 </script></div><div><div> <i class="fas fa-eye fa-fw"></i> <span id="busuanzi_value_page_pv"> <i class="fas fa-spinner fa-pulse"></i> </span>次</div><div> <i class="fas fa-paw fa-fw"></i> <span id="busuanzi_value_site_pv"> <i class="fas fa-spinner fa-pulse"></i> </span>枚</div><div> <i class="fas fa-user-friends fa-fw"></i> <span id="busuanzi_value_site_uv"> <i class="fas fa-spinner fa-pulse"></i> </span>人</div><script src='https://cdn.jsdelivr.net/npm/busuanzi@2.3.0' async='async' ></script></div><div> <i class="fas fa-thumbs-up fa-fw"></i> <a href="https://jekyll-theme-WuK.wu-kan.cn"> jekyll-theme-WuK </a></div><div> <i class="fas fa-copyright fa-fw"></i> 2017-2021 WuK</div><div> <i class="fas fa-info-circle fa-fw"></i> <a href="http://beian.miit.gov.cn"> 粤ICP备 20024947号 </a></div><div> <img src="https://i.loli.net/2021/03/17/Y47tDZTrcy2xwRa.png" class="fa-fw"></img> <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=34070202000407"> 皖公网安备 34070202000407号 </a></div></div></div><!-- Wrap is the content to shift when toggling the sidebar. We wrap the content to avoid any CSS collisions with our real content. --><div class="wrap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/reveal.js@4.1.1/dist/reveal.min.css,npm/reveal.js@4.1.1/dist/theme/serif.min.css" /><style> .sidebar { line-height: 1.5; } .reveal .slides { text-align: left; } .reveal a { color: #268BD2; }</style><div class="slides"><section data-markdown data-separator='&lt;!-- .slide --&gt;' data-separator-vertical='&lt;!-- .slide vertical=true --&gt;' data-background-color='White' > <textarea data-template><h1 id="中大校赛-2020">中大校赛 2020</h1><!-- .slide --><h2 id="a-undercover"><strong>A</strong> Undercover</h2><!-- .slide vertical=true --><ul><li>这题的关键是要知道有哪些人可能是卧底<li>也就是对于每个人，我要知道如果他是卧底，有多少人说了真话<li>统计每个人被说是卧底的次数 $X[i]$<li>每个人被说不是卧底的次数 $Y[i]$<li>说某人不是卧底的人的个数 $Z$<li>那么如果第 $i$ 个人是卧底，就有 $X[i]+(Z-Y[i])$ 个人说了真话<li>然后就是对于每个人，分类讨论了</ul><!-- .slide --><h2 id="b-orienteering"><strong>B</strong> Orienteering</h2><ul><li>命题： 吴坎<li>题意：询问 $n\le20$ 维超立方体上两点间的最短路。</ul><!-- .slide vertical=true --><ul><li>E-立方选路算法<ul><li>时间复杂度 $O(Tn)$<li>空间复杂度 $O(1)$<li>超算集群网络上的经典路由算法</ul></ul><!-- .slide vertical=true --><ul><li>超立方体<ul><li>配图来自张永东老师课件<li>高度互联，弱可扩展的经直连典型网络构型<li>$n$ 维超立方体由两个 $n-1$ 维超立方体构成<li>任意两个相连的节点，其二进制表示仅有一位不同</ul></ul><!-- .slide vertical=true --><p><img src="https://i.loli.net/2020/11/21/6YQvAM7WmXyHUjR.jpg" alt="三维超立方体" /></p><!-- .slide vertical=true --><ul><li>路由计算<ul><li>起点 $\overline{s_{n-1}\dots s_2s_1s_0}$<li>终点 $\overline{d_{n-1}\dots d_2d_1d_0}$<li>异或 $\overline{r_{n-1}\dots r_2r_1r_0}$</ul><li>路由过程<ul><li>$\overline{s_{n-1}\dots s_2s_1s_0}$<li>$\overline{s_{n-1}\dots s_2s_1\left(s_0\oplus r_0 \right)}$<li>$\overline{s_{n-1}\dots s_2\left(s_1\oplus r_1\right)d_0}$<li>$\dots$<li>$\overline{d_{n-1}\dots d_2d_1d_0}$</ul></ul><!-- .slide vertical=true --><p><img src="https://i.loli.net/2020/11/21/ZP7YxFrNIndMtgT.png" alt="四维立方体上的示例" /></p><!-- .slide vertical=true --><ul><li>E-立方选路算法有很多优美的性质，如<ul><li>完成一个通信步的时间仅为网络节点数的对数级<li>可以多点同时通信且不造成阻塞</ul><li>本题削减难度，只有单点通信<ul><li>要跳过 E-立方算法得到结果中原地等待的步数</ul></ul><!-- .slide vertical=true --><ul><li>欢迎大家参加两周后的计算机院定向越野！</ul><!-- .slide --><h2 id="c-compare"><strong>C</strong> Compare</h2><!-- .slide vertical=true --><ul><li>送分题<li>读入两个字符串<li>方法一：把后面多余的 0 去掉，然后比较字符串大小<li>方法二：在短串后面补 0 使其一样长，然后比较字符串大小</ul><!-- .slide --><h2 id="d-decode"><strong>D</strong> Decode</h2><!-- .slide vertical=true --><ul><li>模拟题，直接模拟即可<li>0 开头即为第一种，110 开头即为第二种，1110 开头即为第三种</ul><!-- .slide --><h2 id="e-reading"><strong>E</strong> Reading</h2><!-- .slide vertical=true --><ul><li>模拟题，模拟的时候要用到优先队列<li>用一个 <code>map</code> 给每个字符串一个编号<li>用 <code>vector</code> 存每本书有哪些单词，每个单词在哪些书里<li>用 <code>set</code>（或 <code>priority_queue</code>）维护以 <code>pair&lt;生词数量,书本编号&gt;</code> 的小根堆</ul><!-- .slide --><h2 id="f-competition"><strong>F</strong> Competition</h2><!-- .slide vertical=true --><ul><li>先计算出每个队能解决的问题的最大难度：<li>维护一个堆，每次选出一个能力值最强的队伍<li>这个队伍能解决的问题的最大难度，就是“他现在的能力值”和“之前被选出的队伍能解决的问题的最大难度的最小值”的最小值<li>然后激励和他相连的队伍（注意维护优先队列）</ul><!-- .slide --><h2 id="g-sum"><strong>G</strong> Sum</h2><ul><li>简单的 DP，注意要开 <code>long long</code></ul><!-- .slide --><h2 id="h-sequence"><strong>H</strong> Sequence</h2><!-- .slide vertical=true --><ul><li>DP+线段树优化<li>给你一个长度为 N 的序列，你要修改最少的数字，然后分成 M 段，使得每一段都包含 1~K 的所有数字<li>用 F[i][j]表示把前 j 个数分成 i 份的答案<li>$F[i][j] = \min\lbrace F[i-1][p] + (K-g[p][j]) \vert p&lt;=i-K\rbrace $<li>$g[p][j]$ 表示从 $p+1$ 到 $j$ 的不同数字个数<li>维护从 $j$ 往前，$1$ 到 $K$ 的每个数字的最右位置，从这位置往左，相当于让答案 $-1$<li>维护一棵线段树：支持区间加减、区间最小值查询</ul><!-- .slide --><h2 id="i-tianhe-iia"><strong>I</strong> TianHe-IIA</h2><ul><li>命题：吴坎<li>题意：维护区间上的欧拉变换、区间 x 方和等操作。</ul><!-- .slide vertical=true --><ul><li>区间欧拉变换曾经出现在 <a href="https://wu-kan.cn/_posts/2019-12-15-SYSU-Novice-Programming-Contest-2019,-Online/">19 年新手赛</a><ul><li>快速收敛的区间变换操作<li>线段树上打标记</ul><li>对曾经做过该题的同学有误导<ul><li>存在区间赋值操作，不再收敛<li>数据范围加强，难以使用线段树完成</ul></ul><!-- .slide vertical=true --><ul><li>珂朵莉树<ul><li>又称老司机树（Old Driver Tree, ODT）<li>在 <code>map</code> 上以点代区间，暴力维护<li>2017 年一场 CF 比赛（896C）中提出的数据结构，题目背景主角是珂朵莉<li>一直没有正式比赛中见到过，于是搬到校赛上来</ul></ul><!-- .slide vertical=true --><p><img src="https://i.loli.net/2020/11/21/TDmdAHIezXr1tZY.png" alt="珂朵莉" /></p><!-- .slide vertical=true --><ul><li>在数据随机的时推平操作比较多<ul><li>时间复杂度趋近于 $O(m\log n)$<li>用<a href="https://arxiv.org/pdf/1408.3045v1.pdf">这个数据结构</a>可以把复杂度继续下降</ul><li>非随机数下，出题人想要卡珂朵莉树时肯定会 T<li>标程 0.7s，时限 3s</ul><!-- .slide vertical=true --><ul><li>使用场景<ul><li>区间赋值操作<li>区间统计操作<li>最好用于随机数据<li>走投无路时冲一发暴力</ul></ul><!-- .slide --><h2 id="j-traffic-lights"><strong>J</strong> Traffic Lights</h2><ul><li>这题的关键是要注意到：如果我们知道了第一次等红灯是在哪里，那么后面的情况也都知道了（在同一个位置等红灯的车，后面的情况都是一样的）<li>从后往前扫描，每个红灯要等待的时间段是一个区间（或者是环形区间的前面一段和后面一段）<li>问题就变成了区间覆盖问题，用数据结构维护即可</ul><!-- .slide --><h2 id="k-cards"><strong>K</strong> Cards</h2><ul><li>命题：左谭励<li>题意：$n \le 20$ 张卡牌，每次游戏胜利后随机刷出一张，每种牌出现的概率固定，求集齐两套牌期望要胜利多少次。</ul><!-- .slide vertical=true --><ul><li>如果只是一套牌就很容易，可以状态压缩 DP，用 $F[S]$ 表示当前收集到的卡牌集合为 $S$ 时，收集一套卡牌<strong>还需要</strong>的胜利次数<li>很容易写出递归方程 $F[S] = 1 + \sum_{i} p_i F[S \cup \lbrace i\rbrace ]$<li>为方便，用 $m(S) = \sum_{i\in S} 2^i$ 表示状态。<ul><li>F[m(S)] = 1 + $\sum_{i\in S} p_i F[m(S)] + \sum_{i\notin S} p_i F[m(S)+2^i]$<li>直接计算即可</ul></ul><!-- .slide vertical=true --><ul><li>两套牌如果用 DP，状态数为 $O(3^n)$, $n = 20$ 的情况下计算时间太长。<li>考虑引入 min-max 容斥进行计算<li>$\max(S) = \sum_{T\subseteq S} (-1)^T \min(T)$<li>设 $a_1, a_2,\dots, a_n$ 为每种牌第二次出现的时间，那么本题就是在求 $\max_i a_i$<li>用 min-max 容斥，将题目转为，对于 1~n 的每个子集 T, 求这个子集中的元素第一次出现两次，期望游戏胜利的次数</ul><!-- .slide vertical=true --><p>对于给定的 T，我们用动态规划求解 $\min(T)$</p><ul><li><p>F(S) 表示当前收集到的卡牌集合为 S 时，收集一套卡牌<strong>还需要</strong>的胜利次数。 注意：这里 $S \subseteq T$.</p><li>F(S) = $\sum_{u\notin T} p(u) F(S) + \sum_{u\in T-S} p(u)f(S\cup u) + 1$<li>$[1 - \sum_{u\notin T}p(u)]F(S) = \sum_{u\in T-S}p(u)f(S\cup u) + 1$</ul><p>定义 $P(T) = \sum_{u\in T}p(u)$</p><ul><li>$F(S) = \frac{1}{p(T)}\sum_{u\in T-S}p(u)f(S\cup u)+\color{#FF0000}{1}$</ul><!-- .slide vertical=true --><p>$F(S) = \frac{1}{p(T)}\sum_{u\in T-S}p(u)f(S\cup u)+\color{#FF0000}{1}$</p><ul><li><p>考虑每个 1 做的贡献，可得</p><ul><li>$F(\emptyset) = \sum_{u_1, u_2, …, u_k} \Pi_{i=1}^k \frac{p(u_i)}{P(T)} $, ($u_i \ne u_j$, $u_i \in T$)</ul><li><p>进一步简化，可得：</p><ul><li>$ F(\emptyset) = \sum\star{S\in T} \vert S\vert ! \Pi\star{u\in S} p(u) \times (\frac{1}{P(T)})^{\vert S\vert } $</ul><li><p>定义 $G(T, j) = \sum_{S\in T,\vert S\vert =j} \vert S\vert ! \Pi_{u\in S} p(u)$,</p></ul><p>结论：min(T) = $F(\emptyset) = \sum_{j=1}^{\vert T\vert } G(T, j) / p(T)^j$</p><!-- .slide vertical=true --><p>G 的计算：</p><ul><li>$G(T, j) = \sum_{S\in T,\vert S\vert =j} \vert S\vert ! \Pi_{u\in S} p(u)$</ul><p>对于任意的 $v\in T$</p><ul><li>$\sum_{S\in T,\vert S\vert =j,v\notin S} \vert S\vert ! \Pi_{u\in S} p(u) = G(T-v, j)$<li>$\sum_{S\in T,\vert S\vert =j,v\in S} \vert S\vert ! \Pi_{u\in S} p(u) = p(v) \cdot j \cdot G(T-v, j-1)$</ul><p>因此 $G(T, j) = G(T - v, j) + p(v) \cdot j \cdot G(T-v, j-1)$, 预处理 G 的复杂度为 $O(n\cdot 2^n)$. 原问题计算所有 min(T) 的复杂度同样也是 $O(n\cdot 2^n)$.</p><!-- .slide --><h2 id="l-teams"><strong>L</strong> Teams</h2><!-- .slide vertical=true --><ul><li>如果所有点的度数都很小，用并查集即可<li>对于每个点，log out 时让所在集合 size 减一<li>log in 时直接开一个新点</ul><!-- .slide vertical=true --><ul><li>如果有的点度数很大怎么办？<li>把点分为两类，度数大于 $\sqrt{2M}$ 的为大度点，否则为小度点<li>大度点的个数不超过 $\sqrt{2M}$</ul><!-- .slide vertical=true --><ul><li>考虑一个大度点，当它在线的时候，会把它的所有在线好友合并到同一个队伍里<li>当它 log out 之后，下次再 log in 的时候，还需要处理它的所有邻居吗？<li>不需要的话，需要处理的是哪些呢？</ul><!-- .slide vertical=true --><ul><li>对于每个大度点，用 <code>unordered_set</code> 维护两个集合：<ol><li>和它相邻的在线的点的集合，记为 S1<li>自上次 log out 之后发生过 log in 事件的、相邻的在线的点的集合，记为 S2（S2 一定是 S1 的子集）</ol><li>当大度点 log in 之后，只需要处理 S2 中的所有点，以及在 S1 中找到一个不在 S2 中的点（若没有即忽略）</ul></textarea></section></div><script async="async" src="https://cdn.jsdelivr.net/combine/npm/reveal.js@4.1.1/dist/reveal.min.js,npm/reveal.js@4.1.1/plugin/markdown/markdown.min.js,npm/reveal.js@4.1.1/plugin/math/math.min.js,npm/reveal.js@4.1.1/plugin/highlight/highlight.min.js" onload=" for(let x of document.getElementsByClassName('wrap')) x.classList.add('reveal'); Reveal.initialize({ height: '100%', mouseWheel: true, navigationMode: 'linear', plugins: [ RevealMarkdown,RevealMath,RevealHighlight ] }); "></script></div><label for="sidebar-checkbox" class="sidebar-toggle"></label>
